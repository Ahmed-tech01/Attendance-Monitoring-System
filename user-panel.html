<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>User Panel - Attendance Monitoring System</title>
  <link rel="stylesheet" href="./css/Style.css">
</head>
<body>
  <div class="form-container">
    <h2>TEC Attendance Monitoring</h2>
<form id="submit-to-google-sheet">
  <label>Project Name</label>
  <input type="text" name="Project Name" required>

  <label>Project Number</label>
  <input type="text" name="Project Number" required>

  <label>Person Name</label>
  <input type="text" name="Person Name" required>

<label>Supervisor Name</label>
<select name="Supervisor Name" class="input-field" required>
  <option value="" disabled selected>Select Supervisor</option>
  <option value="Mr. Ali">Mr. Ali</option>
  <option value="Ms. Fatima">Ms. Fatima</option>
  <option value="Engr. Hassan">Engr. Hassan</option>
  <option value="Dr. Nida">Dr. Nida</option>
</select>

  <label>Contact Persons</label>
  <input type="text" name="Contact Persons" required>

  <label>City</label>
  <input type="text" name="City" required>

  <label>Province</label>
  <input type="text" name="Province" required>

  <label>Start Time</label>
  <input type="time" name="Start Time" required>

  <label>End Time</label>
  <input type="time" name="End Time" required>

  <label>TEC Entry Time</label>
  <input type="time" name="TEC Entry Time" required>

  <label>TEC Exit Time</label>
  <input type="time" name="TEC Exit Time" required>

  <label>Get Location</label>
  <button type="button" onclick="getLocation()">Get Coordinates</button>
  <input type="text" id="location" name="Location" readonly required>

  <button type="submit">Submit</button>
</form>
<p id="success-message" style="color: green;"></p>
  </div>

 <script>
  const scriptURL = 'https://script.google.com/macros/s/AKfycbwYlF64QCzIDgnEkppSCwBvF9lMozHcX7hUAQnjUnbAC93srKDP95.../exec';
  const form = document.getElementById('submit-to-google-sheet');
  const message = document.getElementById('success-message');

  form.addEventListener('submit', e => {
    e.preventDefault();
    const formData = new FormData(form);

    fetch(scriptURL, {
      method: 'POST',
      body: formData
    })
    .then(response => {
      message.textContent = "✅ Form submitted successfully!";
      form.reset();
    })
    .catch(error => {
      message.textContent = "❌ Error submitting form. Try again.";
      console.error("Error!", error);
    });
  });

  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        (position) => {
          const coords = position.coords.latitude + ", " + position.coords.longitude;
          document.getElementById("location").value = coords;
        },
        (error) => {
          alert("⚠️ Error getting location: " + error.message);
        }
      );
    } else {
      alert("❌ Geolocation is not supported by this browser.");
    }
  }
</script>



</body>
</html>
